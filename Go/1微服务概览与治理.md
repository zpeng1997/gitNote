**å¾®æœåŠ¡æ¦‚è§ˆ**
* ä¼ ç»Ÿçš„å•ä½“ç»“æ„
* å¾®æœåŠ¡å®šä¹‰
* å¾®æœåŠ¡çš„å‘(ä¸è¶³): Bç«™é‡åˆ°çš„å‘, 
```C++
//ä¾‹å­(å‘ç‚¹): RPC, KVM pps æ€§èƒ½å‘é€åŒ…çš„æ•ˆç‡å¾ˆæ…¢.
```

**æŒ‰ä¸šåŠ¡ç»„ç»‡æœåŠ¡**
* å‰ç«¯,æµ‹è¯•,è¿ç»´,å¼€å‘ç»„æˆä¸€ä¸ªé—­ç¯.(You Build it, you fix it.)
* ä¸å†æ˜¯å¼€å‘ æµ‹è¯• è¿ç»´ åˆ†å¼€æ¥.

**å»ä¸­å¿ƒåŒ–**
* æ•°æ®å»ä¸­å¿ƒåŒ–: æ¯ä¸€ä¸ªæœåŠ¡ç‹¬å ä¸€ä¸ªæ•°æ®åº“
* æ²»ç†å»ä¸­å¿ƒåŒ–: 
* æŠ€æœ¯å»ä¸­å¿ƒåŒ–: è¯­è¨€æŠ€æœ¯æ ˆ. ä¸èƒ½è¿‡äºå»ä¸­å¿ƒåŒ–, è¦é€‚å½“.

**API GateWay**
* é¢å‘èµ„æºçš„API(â˜¹ï¸)  é¢å‘ä¸šåŠ¡åœºæ™¯çš„API(ğŸ‘Œ)
* å®¢æˆ·ç«¯åˆ°å¾®æœåŠ¡, å¼ºè€¦åˆ: Clientæœ‰æ¥å£, å¦‚æœå®¢æˆ·ä¸å‡çº§, é‚£ä¹ˆä¸ºäº†ä¿è¯æœåŠ¡è´¨é‡, è‚¯å®šä¸èƒ½æ’¤, ç»´æŠ¤æ—§çš„æ¶æ„.
* å®¢æˆ·ç«¯å¦‚æœç›´æ¥è¿æ¥å¾®æœåŠ¡, åˆ™ä»»åŠ¡å¤§å’Œé‡çš„ä»»åŠ¡å¿…ç„¶è½åœ¨å®¢æˆ·ç«¯, ä»»åŠ¡é‡(èšåˆä¸åŒAPIæ¥å£çš„å¾®æœåŠ¡), å·¥ä½œé‡å¤§, è€Œä¸”æ–°å…¬å¸ä¸ºäº†æŠ¢å å¸‚åœº, å¿…å®šè¿­ä»£éœ€è¦å¿«. ä»»åŠ¡é‡çš„è¯å‘å¸ƒæ–°ç‰ˆæœ¬å¿…å®šå¾ˆéš¾. 


**MicroServiceåˆ’åˆ†[éƒ½æ˜¯ç—›ç‚¹]**(å¾ˆéš¾å›ç­”, è¦æ ¹æ®å…·ä½“çš„ä¸šåŠ¡åœºæ™¯åˆ’åˆ†.)
* ç›´æ¥å‚ç›´åˆ’åˆ†, æŒ‰ç…§éƒ¨é—¨.(ç®€å•ç²—æš´)
** ç¼ºç‚¹, åˆ’åˆ†è¿‡å¤š. å•ä¸ªè´¦å·å¯èƒ½è¦æ¥æ”¶(VIP,ç¨¿ä»¶,è§†é¢‘,ç‚¹èµ,ç¡¬å¸)ç­‰æœåŠ¡. å› ä¸ºé¢ä¸´åŠ è½½å¤±è´¥, ç½‘ç»œé—®é¢˜ç­‰ç­‰, å°±ç®—é‡‡ç”¨API GateWay, ä¹Ÿå¯èƒ½é¢ä¸´æ€§èƒ½é—®é¢˜ã€‚åŠ äºŒçº§ç¼“å­˜ç¨å¾®æå‡ä¸€ç‚¹.
* DDDæ¨¡å¼, æŠŠç”¨æˆ·é«˜é¢‘ç‡è®¿é—®çš„ä¸€äº›ä¸šåŠ¡å•ç‹¬çš„ä½œä¸ºä¸€ä¸ªå¾®æœåŠ¡(è™½ç„¶å¯èƒ½æ¯”è¾ƒé‡), ä½†æ˜¯æ€§èƒ½åº”è¯¥å¯ä»¥ä¿è¯.
* CQRS â€” Command Query Responsibility Segregation, å‘½ä»¤æŸ¥è¯¢èŒè´£åˆ†ç¦»: ä¾‹å­, Bç«™upä¸»åˆ›ä½œ, upä¸»æœ‰å†™çš„èƒ½åŠ›, å®¡æ ¸ç«¯æœ‰è¯»çš„èƒ½åŠ›. è¿™ä¸ªä¾‹å­ç›¸å½“äºè¯»å†™åˆ†ç¦».

**MicroService å®‰å…¨[å…·ä½“çœ‹PPTçš„å›¾]**
* å®¢æˆ·ç«¯åˆ°BFFçš„å®‰å…¨éªŒè¯:
* å†…ç½‘, BFFåˆ°å¾®æœåŠ¡çš„éªŒè¯(èº«ä»½éªŒè¯å’Œæˆæƒ): 
```
Full Trust: èº«ä»½éªŒè¯ + åŠ å¯†  (èš‚èšé‡‘èå¾ˆå¤šæœåŠ¡çš„æ¨¡å¼)
Half Trust: èº«ä»½è®¤è¯
Zero Trust: æ— 
```


**æ²¡æœ‰æ”¶åˆ°çš„æ–‡ä»¶PPT**
* go çš„gcåŠæ‰“Javaçš„gc
* æœ€å¤§é™åº¦çš„å†—ä½™æ•°æ® 

[Errorå¤„ç†](./Go_Erros.png)


* å¼ºä¾èµ– å¼±ä¾èµ–

```go
func main(){
    fmt.Println("vim-go")
    // Version 1:
    // go func(){
    //     fmt.Println("hello")
    //     panic("ä¸€è·¯å‘è¥¿")
    // }()

    // Version 2
    Go(func(){
        fmt.Println("hello")
        panic("ä¸€è·¯å‘è¥¿")
    })
    time.Sleep(5 * time.Second)
}

func Go(x func()){
    go func(){
        defer func(){
            if err := recover(); err != nil{
                fmt.Println(err)
            }
        }()
        x()
    }()
}
```


```go
// åä¾‹å­
func CountLines(r io.Reader) (int, error){
    var (
        br = bufio.NewReader()
        lines int
        err error
    )
    for{
        _, err := br.ReadString('\n')
        lines ++
        if err != nil{
            break
        }
    }
    if err != io.EOF{
        return 0, err
    }
    return lines, nil
}
// å¥½ä¾‹å­
func CountLines(r io.Reader) (int, error){
    sc := buffio.NewScanner(r)
    lines := 0
    for sc.Scan(){
        lines ++
    }
    return lines, sc.Err()
}
```

**Opaque Error**
```go
package net
type Error interface{
    error
    Timeout() bool
    Temporary() bool
}
// éšå¼
type temporary interface{
    Temporary() bool
}
// æä¾›æ¥å£
func IsTemporary(err error) bool{
    // å†…éƒ¨æ–­è¨€
    te, ok := err.(temporary)
    return ok && te.Temporary()
}
```

**æ¶ˆé™¤errorç¼–å†™çš„éº»çƒ¦?**
[reference](https://dave.cheney.net/practical-go)
[High Performance Go](https://dave.cheney.net/high-performance-go-workshop/gophercon-2019.html)
```go
// å·®ä¾‹å­
// å¥½ä¾‹å­
type errWriter struct{
    io.Writer
    err error
}
// é‡ç‚¹:
func (e *errWriter)Write(buf []byte)(int, error){
    if err != nil{
        return 0, error
    }
    var n int
    n, e.err := e.Writer.Write(buf)
    return n, nil
}
func WriterResponse(w io.Writer, st Status, headers []Header, body io.Reader) error{
    ew := &errorWriter{Writer: w}
    fmt.Fprintf(ew, "HTTP/1.1 %d %s\r\n", St.code, st.Reason)
    for _, h := range headers{
        fmt.Fprintf(ew, "%s: %s\r\n", h.Key, h.Value)
    }
    fmt.Fprintf(ew, "\r\n")
    io.Copy(ew, body)
    return ew, error
}
```


## å­¦ä¹ çš„è¯¯åŒº
* å…ˆçœ‹ä¸€æ‰‹èµ„æ–™, å†çœ‹åˆ«äººçš„æ€»ç»“æˆ–è€…å®è·µ, æˆ–è€…è§†é¢‘.
* ä¸ç„¶æœ€ç»ˆå¿™æ´»æ¥,å¿™æ´»å»; è¿˜æ˜¯ä¼šå›åˆ°è‹±æ–‡çš„ç¬¬ä¸€æ‰‹èµ„æ–™. 


## GopherCon 2019  
[GopherCon 2019: Dave Cheney - Two Go Programs, Three Different Profiling Techniques](https://www.youtube.com/watch?v=nok0aYiGiYA)
* åŠ é€Ÿçš„å…³é”®åœ¨äº è®¡ç®—ä»»åŠ¡ çš„å æ¯”è¦å¤§; 
* ä¸‰ç§Different Profiling Techniques
* æ—§æ—¶é—´/æ–°æ—¶é—´ï¼Œéšç€çº¿ç¨‹å¢åŠ ï¼Œæ—¶é—´å¯¹åº”å‡å°‘ï¼Œå®é™…æƒ…å†µï¼Œéšç€çº¿ç¨‹å¢åŠ ï¼Œè¿è¡Œæ—¶é—´å¯èƒ½ä¼šå¢åŠ ï¼Œå› ä¸ºæœ‰äº†çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€ã€‚